(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[668],{3559:function(e,t,n){"use strict";n(7294);var r=n(917);var o={name:"3goe6e",styles:"margin-top:5rem;text-align:center"};t.Z=function(){return(0,r.tZ)("h1",{css:o},"Don't show")}},5130:function(e,t,n){"use strict";n.d(t,{l0:function(){return o},gN:function(){return a},Kj:function(){return i},jj:function(){return u}});var r=n(701);var o=(0,r.Z)("form",{target:"e13gp4hl3"})({name:"n77sy1",styles:"max-width:600px;width:95%;margin:5rem auto 0 auto;fieldset{margin:2rem 0;border:1px solid #e1e1e1;font-size:2rem;padding:2rem;}"}),a=(0,r.Z)("div",{target:"e13gp4hl2"})({name:"118f3y4",styles:"margin-bottom:2rem;display:flex;align-items:center;label{flex:0 0 150px;font-size:1.8rem;}input,textarea{flex:1;padding:1rem;}textarea{height:400px;}"}),i=(0,r.Z)("input",{target:"e13gp4hl1"})({name:"1bhb9p4",styles:'background-color:var(--orange);width:100%;padding:1.5rem;text-align:center;color:#FFF;font-size:1.8rem;text-transform:uppercase;border:none;font-family:"PT Sans",sans-serif;font-weight:700;&:hover{cursor:pointer;}'}),u=(0,r.Z)("p",{target:"e13gp4hl0"})({name:"174mgo5",styles:'background-color:red;padding:1rem;font-family:"PT Sans",sans-serif;font-weight:700;font-size:1.4rem;color:#FFF;text-align:center;text-transform:uppercase;margin:2rem 0'})},9861:function(e,t,n){"use strict";var r=n(6156),o=n(7294);function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}t.Z=function(e,t,n){var a=(0,o.useState)(e),u=a[0],l=a[1],s=(0,o.useState)({}),c=s[0],p=s[1],f=(0,o.useState)(!1),d=f[0],m=f[1];(0,o.useEffect)((function(){d&&(0===Object.keys(c).length&&n(),m(!1))}),[c]);return{values:u,errors:c,handleSubmit:function(e){e.preventDefault();var n=t(u);p(n),m(!0)},handleChange:function(e){l(i(i({},u),{},(0,r.Z)({},e.target.name,e.target.value)))},handleBlur:function(){var e=t(u);p(e)}}}},4452:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return v}});var r=n(7757),o=n.n(r),a=n(2137),i=n(7294),u=n(1163),l=n(2491),s=n(778),c=n(5130),p=n(9405),f=n(3559),d=n(9861);function m(e){var t={};return e.name||(t.name="Name is required"),e.company||(t.company="Company is required"),e.url?/^(ftp|http|https):\/\/[^ "]+$/.test(e.url)||(t.url="Invalid URL"):t.url="URL is required",e.description||(t.description="Description is required"),t}var h=n(917);var g={name:"",company:"",image:"",url:"",description:""},y={name:"craf4i",styles:"text-align:center;margin-top:5rem"},v=function(){var e=(0,i.useState)(""),t=(e[0],e[1]),n=(0,i.useState)(!1),r=(n[0],n[1]),v=(0,i.useState)(0),b=(v[0],v[1]),w=(0,i.useState)(""),Z=w[0],x=w[1],j=(0,i.useState)(!1),O=j[0],P=(j[1],(0,d.Z)(g,m,(function(){return z.apply(this,arguments)}))),_=P.values,S=P.errors,U=P.handleSubmit,k=P.handleChange,C=P.handleBlur,R=_.name,E=_.company,F=(_.image,_.url),T=_.description,N=(0,u.useRouter)(),D=(0,i.useContext)(p.f),B=D.user,M=D.firebase;function z(){return(z=(0,a.Z)(o().mark((function e(){var t;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(B){e.next=2;break}return e.abrupt("return",N.push("/login"));case 2:return t={name:R,company:E,url:F,imageUrl:Z,description:T,votes:0,comments:[],created:Date.now(),owner:{id:B.uid,name:B.displayName},isVoted:[]},M.db.collection("products").add(t),e.abrupt("return",N.push("/"));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return(0,h.tZ)("div",null,(0,h.tZ)(s.Z,null,B?(0,h.tZ)(i.Fragment,null,(0,h.tZ)("h1",{css:y},"New Product"),(0,h.tZ)(c.l0,{onSubmit:U,noValidate:!0},(0,h.tZ)("fieldset",null,(0,h.tZ)("legend",null,"General Information"),(0,h.tZ)(c.gN,null,(0,h.tZ)("label",{htmlFor:"name"},"Name"),(0,h.tZ)("input",{type:"text",id:"name",placeholder:"Name Product",name:"name",value:R,onChange:k,onBlur:C})),S.name&&(0,h.tZ)(c.jj,null,S.name),(0,h.tZ)(c.gN,null,(0,h.tZ)("label",{htmlFor:"company"},"Company"),(0,h.tZ)("input",{type:"text",id:"company",placeholder:"Your Company",name:"company",value:E,onChange:k,onBlur:C})),S.company&&(0,h.tZ)(c.jj,null,S.company),(0,h.tZ)(c.gN,null,(0,h.tZ)("label",{htmlFor:"image"},"Image"),(0,h.tZ)(l.Z,{accept:"image/*",id:"image",name:"image",randomizeFilename:!0,storageRef:M.storage.ref("products"),onUploadStart:function(){b(0),r(!0)},onUploadError:function(e){r(e),console.log(e)},onUploadSuccess:function(e){b(100),r(!1),t(e),M.storage.ref("products").child(e).getDownloadURL().then((function(e){x(e)}))},onProgress:function(e){return b({progress:e})}})),(0,h.tZ)(c.gN,null,(0,h.tZ)("label",{htmlFor:"url"},"URL"),(0,h.tZ)("input",{type:"url",id:"url",name:"url",placeholder:"URL Product",value:F,onChange:k,onBlur:C})),S.url&&(0,h.tZ)(c.jj,null,S.url)),(0,h.tZ)("fieldset",null,(0,h.tZ)("legend",null,"About your product"),(0,h.tZ)(c.gN,null,(0,h.tZ)("label",{htmlFor:"description"},"Description"),(0,h.tZ)("textarea",{id:"description",name:"description",value:T,onChange:k,onBlur:C})),S.description&&(0,h.tZ)(c.jj,null,S.description)),O&&(0,h.tZ)(c.jj,null,O),(0,h.tZ)(c.Kj,{type:"submit",value:"Create Product"}))):(0,h.tZ)(f.Z,null)))}},9361:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/new-product",function(){return n(4452)}])},2491:function(e,t,n){"use strict";var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(7294),i=s(a),u=s(n(2266)),l=s(n(8966));function s(e){return e&&e.__esModule?e:{default:e}}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function f(e){var t=/(?:\.([^.]+))?$/.exec(e);return null!=t&&null!=t[0]?t[0]:""}var d=function(e){function t(){var e,n,r;c(this,t);for(var o=arguments.length,a=Array(o),i=0;i<o;i++)a[i]=arguments[i];return n=r=p(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(a))),r.uploadTasks=[],r.handleFileSelection=function(e){for(var t=e.target.files,n=0;n<t.length;n++)r.startUpload(t[n])},p(r,n)}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),o(t,[{key:"componentWillUnmount",value:function(){this.cancelRunningUploads()}},{key:"cancelRunningUploads",value:function(){for(;this.uploadTasks.length>0;){var e=this.uploadTasks.pop();"running"===e.snapshot.state&&e.cancel()}}},{key:"removeTask",value:function(e){for(var t=0;t<this.uploadTasks.length;t++)if(this.uploadTasks[t]===e)return void this.uploadTasks.splice(t,1)}},{key:"startUpload",value:function(e){var t=this,n=this.props,r=n.onUploadStart,o=n.onProgress,a=n.onUploadError,i=n.onUploadSuccess,s=n.storageRef,c=n.metadata,p=n.randomizeFilename,d=n.filename,m=void 0;f(m=d?"function"===typeof d?d(e):d:p?(0,u.default)():e.name)||(m+=f(e.name)),Promise.resolve().then((function(){return e.type.match(/image.*/)&&(t.props.maxWidth||t.props.maxHeight)?(0,l.default)(e,t.props.maxWidth,t.props.maxHeight):e})).then((function(e){var n=s.child(m).put(e,c);r&&r(e,n),n.on("state_changed",(function(e){return o&&o(Math.round(100*e.bytesTransferred/e.totalBytes),n)}),(function(e){return a&&a(e,n)}),(function(){return t.removeTask(n),i&&i(n.snapshot.metadata.name,n)})),t.uploadTasks.push(n)}))}},{key:"render",value:function(){var e=this.props,t=(e.storageRef,e.onUploadStart,e.onProgress,e.onUploadSuccess,e.onUploadError,e.randomizeFilename,e.metadata,e.filename,e.maxWidth,e.maxHeight,e.hidden),n=e.as,o=void 0===n?"input":n,a=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,["storageRef","onUploadStart","onProgress","onUploadSuccess","onUploadError","randomizeFilename","metadata","filename","maxWidth","maxHeight","hidden","as"]),u=t?Object.assign({},a.style,{width:"0.1px",height:"0.1px",opacity:0,overflow:"hidden",position:"absolute",zIndex:-1}):a.style;return i.default.createElement(o,r({type:"file",onChange:this.handleFileSelection},a,{style:u}))}}]),t}(a.Component);t.Z=d},8966:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){HTMLCanvasElement.prototype.toBlob||(0,a.default)();return new Promise((function(r,o){var a=new FileReader;a.onload=function(a){var i=new Image;i.onload=function(a){var u=document.createElement("canvas"),l=t||i.width,s=n||i.height;u.width=l,u.height=s;var c=l/i.width,p=s/i.height,f=Math.max(c,p),d=f*i.width,m=f*i.height,h=Math.min((s-m)/2,0),g=Math.min((l-d)/2,0),y=u.getContext("2d");if(!y)return o("Could not get the context of the canvas element");y.drawImage(i,g,h,d,m),u.toBlob((function(e){r(e)}),e.type)},i.src=a.target.result},a.readAsDataURL(e)}))};var r,o=n(5229),a=(r=o)&&r.__esModule?r:{default:r}},5229:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){Object.defineProperty(HTMLCanvasElement.prototype,"toBlob",{value:function(e,t,n){for(var r=atob(this.toDataURL(t,n).split(",")[1]),o=r.length,a=new Uint8Array(o),i=0;i<o;i++)a[i]=r.charCodeAt(i);e(new Blob([a],{type:t||"image/png"}))}})}},9315:function(e){for(var t=[],n=0;n<256;++n)t[n]=(n+256).toString(16).substr(1);e.exports=function(e,n){var r=n||0,o=t;return[o[e[r++]],o[e[r++]],o[e[r++]],o[e[r++]],"-",o[e[r++]],o[e[r++]],"-",o[e[r++]],o[e[r++]],"-",o[e[r++]],o[e[r++]],"-",o[e[r++]],o[e[r++]],o[e[r++]],o[e[r++]],o[e[r++]],o[e[r++]]].join("")}},8293:function(e){var t="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(t){var n=new Uint8Array(16);e.exports=function(){return t(n),n}}else{var r=new Array(16);e.exports=function(){for(var e,t=0;t<16;t++)0===(3&t)&&(e=4294967296*Math.random()),r[t]=e>>>((3&t)<<3)&255;return r}}},2266:function(e,t,n){var r=n(8293),o=n(9315);e.exports=function(e,t,n){var a=t&&n||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var i=(e=e||{}).random||(e.rng||r)();if(i[6]=15&i[6]|64,i[8]=63&i[8]|128,t)for(var u=0;u<16;++u)t[a+u]=i[u];return t||o(i)}}},function(e){e.O(0,[774,929,834,351,985,302,778],(function(){return t=9361,e(e.s=t);var t}));var t=e.O();_N_E=t}]);