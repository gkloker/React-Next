(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[304],{3559:function(e,t,n){"use strict";n(7294);var r=n(917);var o={name:"3goe6e",styles:"margin-top:5rem;text-align:center"};t.Z=function(){return(0,r.tZ)("h1",{css:o},"Don't show")}},5130:function(e,t,n){"use strict";n.d(t,{l0:function(){return o},gN:function(){return a},Kj:function(){return i},jj:function(){return s}});var r=n(701);var o=(0,r.Z)("form",{target:"e13gp4hl3"})({name:"n77sy1",styles:"max-width:600px;width:95%;margin:5rem auto 0 auto;fieldset{margin:2rem 0;border:1px solid #e1e1e1;font-size:2rem;padding:2rem;}"}),a=(0,r.Z)("div",{target:"e13gp4hl2"})({name:"118f3y4",styles:"margin-bottom:2rem;display:flex;align-items:center;label{flex:0 0 150px;font-size:1.8rem;}input,textarea{flex:1;padding:1rem;}textarea{height:400px;}"}),i=(0,r.Z)("input",{target:"e13gp4hl1"})({name:"1bhb9p4",styles:'background-color:var(--orange);width:100%;padding:1.5rem;text-align:center;color:#FFF;font-size:1.8rem;text-transform:uppercase;border:none;font-family:"PT Sans",sans-serif;font-weight:700;&:hover{cursor:pointer;}'}),s=(0,r.Z)("p",{target:"e13gp4hl0"})({name:"174mgo5",styles:'background-color:red;padding:1rem;font-family:"PT Sans",sans-serif;font-weight:700;font-size:1.4rem;color:#FFF;text-align:center;text-transform:uppercase;margin:2rem 0'})},441:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return C}});var r=n(6156);function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function a(e){return function(e){if(Array.isArray(e))return o(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(e){if("string"===typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var i=n(7757),s=n.n(i),u=n(2137),c=n(701),l=n(7294),m=n(1163),f=n(9405),p=n(5253),d=n(778),g=n(3559),y=n(5130),b=n(2517),h=n(917);function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Z(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var x=(0,c.Z)("div",{target:"e1ea05411"})({name:"4qmymy",styles:"@media (min-width: 768px){display:grid;grid-template-columns:2fr 1fr;column-gap:2rem;}"}),w=(0,c.Z)("p",{target:"e1ea05410"})({name:"1ptknkn",styles:"padding:.5rem 2rem;background-color:#DA552F;color:#fff;text-transform:uppercase;font-weight:bold;display:inline-block;text-align:center"}),O={name:"1azakc",styles:"text-align:center"},k={name:"5yl01g",styles:"margin-top:5rem"},j={name:"1efi8gv",styles:"font-weight:bold"},S={name:"1b2e6c8",styles:"border:1px solid #e1e1e1;padding:2rem"},P={name:"k82dzb",styles:"margin:2rem 0"},_={name:"craf4i",styles:"text-align:center;margin-top:5rem"},C=function(){var e=(0,l.useState)({}),t=e[0],n=e[1],o=(0,l.useState)(!1),i=o[0],c=o[1],v=(0,l.useState)({}),C=v[0],N=v[1],A=(0,l.useState)(!0),z=A[0],D=A[1],E=(0,m.useRouter)(),F=E.query.id,I=(0,l.useContext)(f.f),T=I.firebase,V=I.user;if((0,l.useEffect)((function(){F&&z&&function(){var e=(0,u.Z)(s().mark((function e(){var t,r;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.db.collection("products").doc(F);case 2:return t=e.sent,e.next=5,t.get();case 5:(r=e.sent).exists?(n(r.data()),D(!1)):(c(!0),D(!1));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()}),[F]),0===Object.keys(t).length&&!i)return"Loading...";var U=t.url,q=t.imageUrl,K=t.comments,L=t.votes,R=t.created,X=t.name,B=t.description,M=t.company,W=t.owner,$=t.isVoted,G=function(){var e=(0,u.Z)(s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(V){e.next=2;break}return e.abrupt("return",E.push("/login"));case 2:if(W.id===V.uid){e.next=4;break}return e.abrupt("return",E.push("/"));case 4:return e.prev=4,e.next=7,T.db.collection("products").doc(F).delete();case 7:E.push("/"),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(4),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[4,10]])})));return function(){return e.apply(this,arguments)}}();return(0,h.tZ)(d.Z,null,(0,h.tZ)(l.Fragment,null,i?(0,h.tZ)(g.Z,null):(0,h.tZ)("div",{className:"container"},(0,h.tZ)("h1",{css:_},X),(0,h.tZ)(x,null,(0,h.tZ)("div",null,(0,h.tZ)("p",null,"Created: ",(0,p.Z)(new Date(R))),(0,h.tZ)("p",null,"By: ",W.name," from ",M," "),(0,h.tZ)("img",{src:q,alt:""}),(0,h.tZ)("p",null,B),V&&(0,h.tZ)(l.Fragment,null,(0,h.tZ)("h2",null,"Add a comment"),(0,h.tZ)("form",{onSubmit:function(e){if(e.preventDefault(),!V)return E.push("/login");C.userId=V.uid,C.userName=V.displayName;var r=[].concat(a(K),[C]);T.db.collection("products").doc(F).update({comments:r}),n(Z(Z({},t),{},{comments:r})),D(!0)}},(0,h.tZ)(y.gN,null,(0,h.tZ)("input",{type:"text",name:"message",onChange:function(e){N(Z(Z({},C),{},(0,r.Z)({},e.target.name,e.target.value)))}})),(0,h.tZ)(y.Kj,{type:"submit",value:"Add Comment"}))),(0,h.tZ)("h2",{css:P},"Comments"),0===K.length?"There are no comments":(0,h.tZ)("ul",null,K.map((function(e){return(0,h.tZ)("li",{css:S},(0,h.tZ)("p",null,e.message),(0,h.tZ)("p",null,"Write by:",(0,h.tZ)("span",{css:j}," ",e.userName)),function(e){if(W.id===e)return!0}(e.userId)&&(0,h.tZ)(w,null,"Is Owner"))})))),(0,h.tZ)("aside",null,(0,h.tZ)(b.z,{target:"_blank",bgColor:"true",href:U},"Visit URL"),(0,h.tZ)("div",{css:k},(0,h.tZ)("p",{css:O},L," Votes"),V&&(0,h.tZ)(b.z,{onClick:function(){if(!V)return E.push("/login");var e=L+1;if(!$.includes(V.uid)){var r=[].concat(a($),[V.uid]);T.db.collection("products").doc(F).update({votes:e,isVoted:r}),n(Z(Z({},t),{},{votes:e})),D(!0)}}},"Vote")))),!!V&&(W.id===V.uid||void 0)&&(0,h.tZ)(b.z,{onClick:G},"Delete Product"))))}},4176:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/products/[id]",function(){return n(441)}])}},function(e){e.O(0,[774,929,834,351,985,302,253,778],(function(){return t=4176,e(e.s=t);var t}));var t=e.O();_N_E=t}]);